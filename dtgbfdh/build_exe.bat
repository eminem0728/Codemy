@echo off
echo ========================================
echo   CodeLearn Desktop - –°–±–æ—Ä–∫–∞ .exe
echo ========================================
echo.

REM –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å—Ç–∞–Ω–æ–≤–∫—É Node.js
node --version >nul 2>&1
if %errorlevel% neq 0 (
    echo Node.js –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!
    echo –°–∫–∞—á–∞–π—Ç–µ —Å: https://nodejs.org/
    pause
    exit /b 1
)

REM –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å—Ç–∞–Ω–æ–≤–∫—É npm
npm --version >nul 2>&1
if %errorlevel% neq 0 (
    echo npm –Ω–µ –Ω–∞–π–¥–µ–Ω!
    echo –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Node.js
    pause
    exit /b 1
)

echo Node.js –∏ npm –Ω–∞–π–¥–µ–Ω—ã.
echo.

REM –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
echo –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π...
npm install

if %errorlevel% neq 0 (
    echo –û—à–∏–±–∫–∞ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π!
    pause
    exit /b 1
)

echo.
echo –°–±–æ—Ä–∫–∞ .exe —Ñ–∞–π–ª–∞...
echo –≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç...
echo.

REM –°–æ–±–∏—Ä–∞–µ–º .exe —Ñ–∞–π–ª
npm run build-win

if %errorlevel% neq 0 (
    echo –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ .exe —Ñ–∞–π–ª–∞!
    echo –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.
    pause
    exit /b 1
)

echo.
echo ========================================
echo ‚úÖ –°–ë–û–†–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê –£–°–ü–ï–®–ù–û!
echo ========================================
echo.
echo üìÅ .exe —Ñ–∞–π–ª –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø–∞–ø–∫–µ: dist\
echo.
echo üöÄ –î–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
echo 1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É dist\
echo 2. –ù–∞–π–¥–∏—Ç–µ CodeLearn Setup.exe
echo 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫
echo.
pause